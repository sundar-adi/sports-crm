{% load static %}

{% load wagtailcore_tags wagtailimages_tags hitcount_tags %}

{% load article_tags %}

<article class="uk-card-body">
  <h3 class="uk-card-title {% if first %}uk-card-title--important{% endif %}">{{article.title}}</h3>
  <div class="uk-flex uk-flex-between fw-medium uk-margin-small-top mb-xs">
    <div>
      {% for author in article.authors.all %}
      <a href="{% url 'profile_view' author.username %}" class="hp-link-primary">{{ author.first_name }} {{ author.last_name }}</a> {% if not forloop.last %}, {% endif %}
      {% empty %}
      HPTX
      {% endfor %}
      on {{ article.publication_date|date }}
    </div>
    <div>
      {% if settings.home.GlobalSettings.show_view_count %}
      <span class="uk-margin-right">
        {% get_hit_count for article as hits %}
        Views {{ hits }}
      </span>
      {% endif %}
      {% if homepage.has_social_links %}
      {% share article %}
      {% endif %}
    </div>
  </div>
  <div>
    {% if first and article.featured_image %}{% image article.featured_image original alt="" class="uk-hp-article-image" %}{% endif %}
    <div uk-grid class="uk-grid-small uk-margin-small-top">
      {% if not first %}
      {% with article.specific.get_verbose_name as page_type %}
      {% if page_type == "Article page" and article.featured_image %}
      <div class="uk-width-2-5">{% image article.featured_image original alt="" %}</div>
      {% elif page_type == "Video page" %}
      <div class="uk-width-2-5 uk-hp-card-primary-smallmedia">{{ article|youtube_block }}</div>
      {% elif page_type == "Podcast page" %}
      <div class="uk-width-1-4 uk-hp-card-primary-smallmedia">{{ article|soundcloud_block }}</div>
      {% endif %}
      {% endwith %}
      {% endif %}
      <div class="uk-width-expand uk-hp-card-primary-intro {% if not first and article|has_media %}uk-hp-card-primary-intro--has-media{% endif %}">
        <ellipsis>
        {{ article|first_paragraph_value }}
        </ellipsis>
      </div>
    </div>
  </div>
</article>
